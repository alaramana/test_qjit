(function(e){if(e.fn.inputmask==undefined){e.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},escapeChar:"\\",mask:null,oncomplete:e.noop,onincomplete:e.noop,oncleared:e.noop,repeat:0,greedy:true,autoUnmask:false,clearMaskOnLostFocus:true,insertMode:true,clearIncomplete:false,aliases:{},onKeyUp:e.noop,onKeyDown:e.noop,showMaskOnFocus:true,showMaskOnHover:true,onKeyValidation:e.noop,skipOptionalPartCharacter:" ",showTooltip:false,numericInput:false,radixPoint:"",skipRadixDance:false,rightAlignNumerics:true,definitions:{9:{validator:"[0-9]",cardinality:1},a:{validator:"[A-Za-zА-яЁё]",cardinality:1},"*":{validator:"[A-Za-zА-яЁё0-9]",cardinality:1}},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},ignorables:[9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],getMaskLength:function(e,t,n,r,i){var s=e.length;if(!t&&n>1){s+=e.length*(n-1)}return s}},val:e.fn.val,escapeRegex:function(e){var t=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];return e.replace(new RegExp("(\\"+t.join("|\\")+")","gim"),"\\$1")}};e.fn.inputmask=function(t,n){function m(e){var t=document.createElement("input"),e="on"+e,n=e in t;if(!n){t.setAttribute(e,"return;");n=typeof t[e]=="function"}t=null;return n}function g(t,n){var i=r.aliases[t];if(i){if(i.alias)g(i.alias);e.extend(true,r,i);e.extend(true,r,n);return true}return false}function y(t){var n=false,i=0,s=r.greedy,o=r.repeat;if(t.length==1&&s==false){r.placeholder=""}var u=e.map(t.split(""),function(e,t){var s=[];if(e==r.escapeChar){n=true}else if(e!=r.optionalmarker.start&&e!=r.optionalmarker.end||n){var o=r.definitions[e];if(o&&!n){for(var u=0;u<o.cardinality;u++){s.push(E(i+u))}}else{s.push(e);n=false}i+=s.length;return s}});var a=u.slice();for(var f=1;f<o&&s;f++){a=a.concat(u.slice())}return{mask:a,repeat:o,greedy:s}}function b(t){var n=false,i=false;var s=false;return e.map(t.split(""),function(e,t){var o=[];if(e==r.escapeChar){i=true}else if(e==r.optionalmarker.start&&!i){n=true;s=true}else if(e==r.optionalmarker.end&&!i){n=false;s=true}else{var u=r.definitions[e];if(u&&!i){var a=u["prevalidator"],f=a?a.length:0;for(var l=1;l<u.cardinality;l++){var c=f>=l?a[l-1]:[],h=c["validator"],p=c["cardinality"];o.push({fn:h?typeof h=="string"?new RegExp(h):new function(){this.test=h}:new RegExp("."),cardinality:p?p:1,optionality:n,newBlockMarker:n==true?s:false,offset:0,casing:u["casing"],def:u["definitionSymbol"]|e});if(n==true)s=false}o.push({fn:u.validator?typeof u.validator=="string"?new RegExp(u.validator):new function(){this.test=u.validator}:new RegExp("."),cardinality:u.cardinality,optionality:n,newBlockMarker:s,offset:0,casing:u["casing"],def:u["definitionSymbol"]|e})}else{o.push({fn:null,cardinality:0,optionality:n,newBlockMarker:s,offset:0,casing:null,def:e});i=false}s=false;return o}})}function w(){function s(e){return r.optionalmarker.start+e+r.optionalmarker.end}function o(e){var t=0,n=0,s=e.length;for(i=0;i<s;i++){if(e.charAt(i)==r.optionalmarker.start){t++}if(e.charAt(i)==r.optionalmarker.end){n++}if(t>0&&t==n)break}var o=[e.substring(0,i)];if(i<s){o.push(e.substring(i+1,s))}return o}function u(e){var t=e.length;for(i=0;i<t;i++){if(e.charAt(i)==r.optionalmarker.start){break}}var n=[e.substring(0,i)];if(i<t){n.push(e.substring(i+1,t))}return n}function a(r,i){var f=o(i);var l,c;var h=u(f[0]);if(h.length>1){l=r+h[0]+s(h[1])+(f.length>1?f[1]:"");if(e.inArray(l,n)==-1){n.push(l);c=y(l);t.push({mask:l,_buffer:c["mask"],buffer:c["mask"].slice(),tests:b(l),lastValidPosition:undefined,greedy:c["greedy"],repeat:c["repeat"]})}l=r+h[0]+(f.length>1?f[1]:"");if(e.inArray(l,n)==-1){n.push(l);c=y(l);t.push({mask:l,_buffer:c["mask"],buffer:c["mask"].slice(),tests:b(l),lastValidPosition:undefined,greedy:c["greedy"],repeat:c["repeat"]})}if(u(h[1]).length>1){a(r+h[0],h[1]+f[1])}if(f.length>1&&u(f[1]).length>1){a(r+h[0]+s(h[1]),f[1]);a(r+h[0],f[1])}}else{l=r+f;if(e.inArray(l,n)==-1){n.push(l);c=y(l);t.push({mask:l,_buffer:c["mask"],buffer:c["mask"].slice(),tests:b(l),lastValidPosition:undefined,greedy:c["greedy"],repeat:c["repeat"]})}}}var t=[];var n=[];if(e.isArray(r.mask)){e.each(r.mask,function(e,t){a("",t.toString())})}else a("",r.mask.toString());return t}function E(e){return r.placeholder.charAt(e%r.placeholder.length)}function S(t,n){function i(){return t[n]}function s(){return i()["tests"]}function l(){return i()["_buffer"]}function c(){return i()["buffer"]}function h(s,o,u,a){function f(e,t){var n=v(e),i=o?1:0,s="",a=t["buffer"];for(var f=t["tests"][n].cardinality;f>i;f--){s+=w(a,n-(f-1))}if(o){s+=o}return t["tests"][n].fn!=null?t["tests"][n].fn.test(s,a,e,u,r):false}u=u===true;if(u){var l=f(s,i());if(l===true){l={pos:s}}return l}var h=[],l=false,p=n;e.each(t,function(e,t){var i=this;n=e;var u=s;if(p!=n&&!d(s)){if(o==i["_buffer"][u]||o==r.skipOptionalPartCharacter){h.push({activeMasksetIndex:e,result:{refresh:true,c:i["_buffer"][u]}});i["lastValidPosition"]=u;return false}else i["lastValidPosition"]=a?m()+1:-1}if(i["lastValidPosition"]==undefined&&u==(a?y(m()):g(-1))||a||r.numericInput?i["lastValidPosition"]<=r.numericInput?m():g(u):i["lastValidPosition"]>=y(u)){if(u>=0&&u<m()){l=f(u,i);if(l!==false){if(l===true){l={pos:u}}var v=l.pos||u;if(i["lastValidPosition"]==undefined||(a?r.greedy?i["lastValidPosition"]>v:v==c().length-1:i["lastValidPosition"]<v))i["lastValidPosition"]=v}h.push({activeMasksetIndex:e,result:l})}}});n=p;return h}function p(s){var o=n,u={activeMasksetIndex:0,lastValidPosition:s?m()+1:-1};e.each(t,function(e,t){var n=this;if(n["lastValidPosition"]!=undefined){if(s||r.numericInput?n["lastValidPosition"]<u["lastValidPosition"]:n["lastValidPosition"]>u["lastValidPosition"]){u["activeMasksetIndex"]=e;u["lastValidPosition"]=n["lastValidPosition"]}}});n=u["activeMasksetIndex"];if(o!=n){if(s){T(c(),0,y(u["lastValidPosition"]))}else{T(c(),g(u["lastValidPosition"]),m())}i()["writeOutBuffer"]=true}}function d(e){var t=v(e);var n=s()[t];return n!=undefined?n.fn:false}function v(e){return e%s().length}function m(){return r.getMaskLength(l(),i()["greedy"],i()["repeat"],c(),r)}function g(e){var t=m();if(e>=t)return t;var n=e;while(++n<t&&!d(n)){}return n}function y(e){var t=e;if(t<=0)return 0;while(--t>0&&!d(t)){}return t}function b(e,t,n,r,i){if(r)t=S(e,t,i);var o=s()[v(t)];var u=n;if(u!=undefined){switch(o.casing){case"upper":u=n.toUpperCase();break;case"lower":u=n.toLowerCase();break}}e[t]=u}function w(e,t,n){if(n)t=S(e,t);return e[t]}function S(e,t,n){var r;if(n){while(t<0&&e.length<m()){r=l().length-1;t=l().length;while(l()[r]!==undefined){e.unshift(l()[r--])}}}else{while(e[t]==undefined&&e.length<m()){r=0;while(l()[r]!==undefined){e.push(l()[r++])}}}return t}function x(e,t,n){e._valueSet(t.join(""));if(n!=undefined){M(e,n)}}function T(e,t,n){for(var r=t,i=m();r<n&&r<i;r++){b(e,r,w(l().slice(),r,true))}}function N(e,t){var n=v(t);b(e,t,w(l(),n))}function C(s,o,u,a){var f=e(s).data("_inputmask")["isRTL"],c=a!=undefined?a.slice():L(s._valueGet(),f).split("");e.each(t,function(e,t){t["buffer"]=t["_buffer"].slice();t["lastValidPosition"]=undefined;t["p"]=f?m():0});if(u!==true)n=0;if(o)s._valueSet("");if(f&&!r.numericInput)c=c.reverse();var h=m();e.each(c,function(t,n){var a=f?r.numericInput?h:h-t:t;if(u&&d(f?a-1:a)||n!=w(l(),f?a-1:a,true)&&e.inArray(n,l().slice(i()["lastValidPosition"]+1,i()["p"]))==-1){e(s).trigger("keypress",[true,n.charCodeAt(0),o,u,a,f])}});if(u===true){i()["lastValidPosition"]=f?g(i()["p"]):y(i()["p"])}}function k(t){return e.inputmask.escapeRegex.call(this,t)}function L(e,t){return t?e.replace(new RegExp("^("+k(l().join(""))+")*"),""):e.replace(new RegExp("("+k(l().join(""))+")*$"),"")}function A(t){var n=c(),r=n.slice(),i,o;if(e(t).data("_inputmask")["isRTL"]){for(var o=0;o<=r.length-1;o++){var i=v(o);if(s()[i].optionality){if(!d(o)||!h(o,n[o],true))r.splice(0,1);else break}else break}}else{for(var o=r.length-1;o>=0;o--){var i=v(o);if(s()[i].optionality){if(!d(o)||!h(o,n[o],true))r.pop();else break}else break}}x(t,r)}function O(t,n){if(s()&&(n===true||!t.hasClass("hasDatepicker"))){return e.map(c(),function(e,t){return d(t)&&h(t,e,true)?e:null}).join("")}else{return t[0]._valueGet()}}function M(t,n,i){var s=t.jquery&&t.length>0?t[0]:t,o;if(typeof n=="number"){if(!e(t).is(":visible")){return}i=typeof i=="number"?i:n;if(r.insertMode==false&&n==i)i++;if(s.setSelectionRange){s.selectionStart=n;s.selectionEnd=u?n:i}else if(s.createTextRange){o=s.createTextRange();o.collapse(true);o.moveEnd("character",i);o.moveStart("character",n);o.select()}}else{if(!e(t).is(":visible")){return{begin:0,end:0}}if(s.setSelectionRange){n=s.selectionStart;i=s.selectionEnd}else if(document.selection&&document.selection.createRange){o=document.selection.createRange();n=0-o.duplicate().moveStart("character",-1e5);i=n+o.text.length}return{begin:n,end:i}}}function _(r){var i=false,s=0,o=n;e.each(t,function(e,t){n=e;var o=y(m());if(t["lastValidPosition"]!=undefined&&t["lastValidPosition"]>=s&&t["lastValidPosition"]==o){var u=true;for(var a=0;a<=o;a++){var f=d(a),c=v(a);if(f&&(r[a]==undefined||r[a]==E(a))||!f&&r[a]!=l()[c]){u=false;break}}i=i||u;if(i)return false}s=t["lastValidPosition"]});n=o;return i}this.unmaskedvalue=function(e,t){return O(e,t)};this.isComplete=function(e){return _(e)};this.mask=function(u){function I(t){var n=e._data(t).events;e.each(n,function(t,n){e.each(n,function(e,t){if(t.namespace=="inputmask"){var n=t.handler;t.handler=function(e){if(this.readOnly||this.disabled)e.preventDefault;else return n.apply(this,arguments)}}})})}function q(t){var n;if(Object.getOwnPropertyDescriptor)n=Object.getOwnPropertyDescriptor(t,"value");if(n&&n.get){if(!t._valueGet){t._valueGet=n.get;t._valueSet=n.set;Object.defineProperty(t,"value",{get:function(){var t=e(this),n=e(this).data("_inputmask"),r=n["masksets"],i=n["activeMasksetIndex"];return n&&n["opts"].autoUnmask?t.inputmask("unmaskedvalue"):this._valueGet()!=r[i]["_buffer"].join("")?this._valueGet():""},set:function(t){this._valueSet(t);e(this).triggerHandler("setvalue.inputmask")}})}}else if(document.__lookupGetter__&&t.__lookupGetter__("value")){if(!t._valueGet){t._valueGet=t.__lookupGetter__("value");t._valueSet=t.__lookupSetter__("value");t.__defineGetter__("value",function(){var t=e(this),n=e(this).data("_inputmask"),r=n["masksets"],i=n["activeMasksetIndex"];return n&&n["opts"].autoUnmask?t.inputmask("unmaskedvalue"):this._valueGet()!=r[i]["_buffer"].join("")?this._valueGet():""});t.__defineSetter__("value",function(t){this._valueSet(t);e(this).triggerHandler("setvalue.inputmask")})}}else{if(!t._valueGet){t._valueGet=function(){return this.value};t._valueSet=function(e){this.value=e}}if(e.fn.val.inputmaskpatch!=true){e.fn.val=function(){if(arguments.length==0){var t=e(this);if(t.data("_inputmask")){if(t.data("_inputmask")["opts"].autoUnmask)return t.inputmask("unmaskedvalue");else{var n=e.inputmask.val.apply(t);var r=e(this).data("_inputmask"),i=r["masksets"],s=r["activeMasksetIndex"];return n!=i[s]["_buffer"].join("")?n:""}}else return e.inputmask.val.apply(t)}else{var o=arguments;return this.each(function(){var t=e(this);var n=e.inputmask.val.apply(t,o);if(t.data("_inputmask"))t.triggerHandler("setvalue.inputmask");return n})}};e.extend(e.fn.val,{inputmaskpatch:true})}}}function R(e,t){if(r.numericInput&&r.radixPoint!=""&&r.skipRadixDance===false){var n=e._valueGet();var i=n.indexOf(r.radixPoint);H=t.begin<=i||t.end<=i||i==-1}}function U(e,t,n){var r=c();while(!d(e)&&e-1>=0)e--;for(var o=e;o<t&&o<m();o++){if(d(o)){N(r,o);var u=g(o);var a=w(r,u);if(a!=E(u)){if(u<m()&&h(o,a,true,H)!==false&&s()[v(o)].def==s()[v(u)].def){b(r,o,w(r,u),true,H);if(u<t){N(r,u)}}else{if(d(o))break}}}else{N(r,o)}}if(n!=undefined)b(r,H?t:y(t),n);if(i()["greedy"]==false){var f=L(r.join(""),H).split("");r.length=f.length;for(var o=0,p=r.length;o<p;o++){r[o]=f[o]}if(r.length==0)i()["buffer"]=l().slice()}return e}function z(e,t,n,r){var o=c();for(var u=e;u<=t&&u<m();u++){if(d(u)){var a=w(o,u,true);b(o,u,n,true,H);if(a!=E(u)){var f=g(u);if(f<m()){if(h(f,a,true,H)!==false&&s()[v(u)].def==s()[v(f)].def)n=a;else{if(d(f))break;else n=a}}else break}else{n=a;if(r!==true)break}}else N(o,u)}var p=o.length;if(i()["greedy"]==false){var y=L(o.join(""),H).split("");o.length=y.length;for(var u=0,S=o.length;u<S;u++){o[u]=y[u]}if(o.length==0)i()["buffer"]=l().slice()}return t-(p-o.length)}function W(s){D=false;var u=this,a=s.keyCode,h=M(u);R(u,h);if(a==r.keyCode.BACKSPACE||a==r.keyCode.DELETE||o&&a==127||s.ctrlKey&&a==88){s.preventDefault();var v=h.begin;if(h.begin==0&&h.end==m()){T(c(),h.begin,h.end);e.each(t,function(e,t){t["buffer"]=t["_buffer"].slice();t["lastValidPosition"]=undefined;t["p"]=H?m():0})}else if(h.end-h.begin>1||h.end-h.begin==1&&r.insertMode){T(c(),h.begin,h.end);var b=m();if(r.greedy==false){H?z(0,h.end-1,E(h.end),true):U(h.begin,b)}else{for(var w=h.begin;w<h.end;w++){if(d(w))H?z(0,h.end-1,E(h.end),true):U(h.begin,b)}}C(u,false,true,c())}else{e.each(t,function(e,t){n=e;v=f?h.end:h.begin;var s=c(),o=H?y(m()+1):g(-1),u=m();if(a==r.keyCode.DELETE){if(H?v>o:v<o)v=o;if(v<u){if(r.numericInput&&r.radixPoint!=""&&s[v]==r.radixPoint){v=s.length-1==v?v:g(v);v=U(v,u)}else{if(H){v=z(0,v,E(v),true);v=g(v)}else{v=U(v,u)}}if(i()["lastValidPosition"]!=undefined){if(i()["lastValidPosition"]!=-1&&c()[i()["lastValidPosition"]]==l()[i()["lastValidPosition"]])i()["lastValidPosition"]=H?g(i()["lastValidPosition"]):i()["lastValidPosition"]==0?-1:y(i()["lastValidPosition"]);if(H?i()["lastValidPosition"]>o:i()["lastValidPosition"]<o){i()["lastValidPosition"]=undefined;i()["p"]=o}else{i()["writeOutBuffer"]=true;i()["p"]=v}}}}else if(a==r.keyCode.BACKSPACE){if(H?v<=o:v>o){v-=1;if(r.numericInput&&r.radixPoint!=""&&s[v]==r.radixPoint){v=z(0,s.length-1==v?v:v-1,E(v),true);v++}else{if(H){v=z(0,v,E(v),true);v=s[v+1]==r.radixPoint?v+1:g(v)}else{v=U(v,u)}}if(i()["lastValidPosition"]!=undefined){if(i()["lastValidPosition"]!=-1&&c()[i()["lastValidPosition"]]==l()[i()["lastValidPosition"]])i()["lastValidPosition"]=H?g(i()["lastValidPosition"]):i()["lastValidPosition"]==0?-1:y(i()["lastValidPosition"]);if(H?i()["lastValidPosition"]>o:i()["lastValidPosition"]<o){i()["lastValidPosition"]=undefined;i()["p"]=o}else{i()["writeOutBuffer"]=true;i()["p"]=v}}}else if(n>0){i()["lastValidPosition"]=undefined;i()["writeOutBuffer"]=true;i()["p"]=o;n=0;i()["buffer"]=l().slice();i()["p"]=H?y(m()+1):g(-1);i()["lastValidPosition"]=undefined}}})}p(H);x(u,c(),i()["p"]);if(u._valueGet()==l().join(""))e(u).trigger("cleared");if(r.showTooltip){k.prop("title",i()["mask"])}}else if(a==r.keyCode.END||a==r.keyCode.PAGE_DOWN){setTimeout(function(){var e=H?i()["lastValidPosition"]:g(i()["lastValidPosition"]);if(!r.insertMode&&e==m()&&!s.shiftKey)e--;M(u,s.shiftKey?h.begin:e,e)},0)}else if(a==r.keyCode.HOME&&!s.shiftKey||a==r.keyCode.PAGE_UP){M(u,0,s.shiftKey?h.begin:0)}else if(a==r.keyCode.ESCAPE){u._valueSet(i()["undoBuffer"]);C(u,true,true)}else if(a==r.keyCode.INSERT&&!(s.shiftKey||s.ctrlKey)){r.insertMode=!r.insertMode;M(u,!r.insertMode&&h.begin==m()?h.begin-1:h.begin)}else if(r.insertMode==false&&!s.shiftKey){if(a==r.keyCode.RIGHT){setTimeout(function(){var e=M(u);M(u,e.begin)},0)}else if(a==r.keyCode.LEFT){setTimeout(function(){var e=M(u);M(u,e.begin-1)},0)}}r.onKeyDown.call(this,s,c(),r);P=e.inArray(a,r.ignorables)!=-1}function X(s,o,u,a,f,l,v){H=v==undefined?H:v;if(u==undefined&&D)return false;D=true;var N=this,k=e(N);s=s||window.event;var u=u||s.which||s.charCode||s.keyCode,L=String.fromCharCode(u);if(r.numericInput&&L==r.radixPoint&&o!==true){var A=N._valueGet();var O=A.indexOf(r.radixPoint);M(N,g(O!=-1?O:m()))}if((s.ctrlKey||s.metaKey||P)&&o!==true){return true}else{if(u){var B,j,F;if(o){var I=f?l:r.numericInput?g(i()["p"]):i()["p"];B={begin:I,end:I}}else{B=M(N)}var q=B.end-B.begin>1||B.end-B.begin==1&&r.insertMode;if(q){var R=n,W=false;e.each(t,function(e,t){n=e;i()["undoBuffer"]=c().join("");var s=B.end<m()?B.end:m();T(c(),B.begin,s);var o=m();if(r.greedy==false){H?z(0,s-1,E(s),true):U(B.begin,o)}else{for(var u=B.begin;u<s;u++){if(d(u))H?z(0,s-1,E(s-1),true):U(B.begin,o)}}if(i()["lastValidPosition"]>B.begin&&i()["lastValidPosition"]<s){i()["lastValidPosition"]=H?s:B.begin}else{W=true}});if(W===true){n=R;C(N,false,true,c());if(!r.insertMode){e.each(t,function(e,t){n=e;H?U(0,posend):z(B.begin,ml,E(B.begin),true);i()["lastValidPosition"]=H?y(i()["lastValidPosition"]):g(i()["lastValidPosition"])})}}n=R}if(H){var X=y(B.end);j=h(X,L,f,H);if(f===true)j=[{activeMasksetIndex:n,result:j}];e.each(j,function(e,t){n=t["activeMasksetIndex"];i()["writeOutBuffer"]=true;var s=t["result"];if(s!==false){var o=false,u=c();if(s!==true){o=s["refresh"];X=s.pos!=undefined?s.pos:X;L=s.c!=undefined?s.c:L}if(o!==true){var a=m();var f=g(-1),l=f;if(r.insertMode==true){if(i()["greedy"]==true){var h=u.slice();while(w(h,l,true)!=E(l)&&l<=X){l=l==a?a+1:g(l)}}if(l<=X&&(i()["greedy"]||u.length<a||w(u,X)==E(X))){if(u[f]!=E(f)&&u.length<a){var p=S(u,-1,H);if((q?B.begin:B.end)!=0)X=X+p;a=u.length}U(l,X,L)}else i()["writeOutBuffer"]=false}else b(u,X,L,true,H)}i()["p"]=X}})}else{var X=g(B.begin-1);j=h(X,L,f,H);if(f===true)j=[{activeMasksetIndex:n,result:j}];e.each(j,function(e,t){n=t["activeMasksetIndex"];i()["writeOutBuffer"]=true;var s=t["result"];if(s!==false){var o=false,u=c();if(s!==true){o=s["refresh"];X=s.pos!=undefined?s.pos:X;L=s.c!=undefined?s.c:L}if(o!==true){if(r.insertMode==true){var a=m();var f=u.slice();while(w(f,a,true)!=E(a)&&a>=X){a=a==0?-1:y(a)}if(a>=X)z(X,u.length,L);else i()["writeOutBuffer"]=false}else b(u,X,L,true,H)}i()["p"]=g(X)}})}if(f!==true)p(H);if(a!==false){e.each(j,function(e,t){if(t["activeMasksetIndex"]==n){F=t;return false}});if(F!=undefined){var V=this;setTimeout(function(){r.onKeyValidation.call(V,F["result"],r)},0);if(i()["writeOutBuffer"]&&F["result"]!==false){var J=c();x(N,J,o?undefined:r.numericInput?g(i()["p"]):i()["p"]);setTimeout(function(){if(_(J))k.trigger("complete")},0)}else{i()["buffer"]=i()["undoBuffer"].split("")}}}if(r.showTooltip){k.prop("title",i()["mask"])}s.preventDefault()}}}function V(t){var n=e(this),s=this,o=t.keyCode,u=c();r.onKeyUp.call(this,t,u,r);if(o==r.keyCode.TAB&&n.hasClass("focus.inputmask")&&s._valueGet().length==0&&r.showMaskOnFocus){u=l().slice();x(s,u);if(!H)M(s,0);i()["undoBuffer"]=s._valueGet()}}var k=e(u);if(!k.is(":input"))return;k.data("_inputmask",{masksets:t,activeMasksetIndex:n,opts:r,isRTL:false});if(r.showTooltip){k.prop("title",i()["mask"])}i()["greedy"]=i()["greedy"]?i()["greedy"]:i()["repeat"]==0;var O=k.prop("maxLength");if(m()>O&&O>-1){if(O<l().length)l().length=O;if(i()["greedy"]==false){i()["repeat"]=Math.round(O/l().length)}k.prop("maxLength",m()*2)}q(u);i()["undoBuffer"]=u._valueGet();var D=false,P=false,H=false;if(u.dir=="rtl"||r.numericInput){if(u.dir=="rtl"||r.numericInput&&r.rightAlignNumerics)k.css("text-align","right");u.dir="ltr";k.removeAttr("dir");var B=k.data("_inputmask");B["isRTL"]=true;k.data("_inputmask",B);H=true}k.unbind(".inputmask");k.removeClass("focus.inputmask");k.closest("form").bind("submit",function(){if(k[0]._valueGet()!=i()["undoBuffer"]){k.change()}});k.bind("mouseenter.inputmask",function(){var t=e(this),n=this;if(!t.hasClass("focus.inputmask")&&r.showMaskOnHover){if(n._valueGet()!=c().join("")){x(n,c())}}}).bind("blur.inputmask",function(){var s=e(this),o=this,u=o._valueGet(),a=c();s.removeClass("focus.inputmask");if(u!=i()["undoBuffer"]){s.change()}if(r.clearMaskOnLostFocus&&u!=""){if(u==l().join(""))o._valueSet("");else{A(o)}}if(!_(a)){s.trigger("incomplete");if(r.clearIncomplete){e.each(t,function(e,t){t["buffer"]=t["_buffer"].slice();t["lastValidPosition"]=undefined;t["p"]=H?m():0});n=0;if(r.clearMaskOnLostFocus)o._valueSet("");else{a=l().slice();x(o,a)}}}}).bind("focus.inputmask",function(){var t=e(this),n=this,s=n._valueGet();if(r.showMaskOnFocus&&!t.hasClass("focus.inputmask")&&(!r.showMaskOnHover||r.showMaskOnHover&&s=="")){if(n._valueGet()!=c().join("")){x(n,c(),i()["p"])}}t.addClass("focus.inputmask");i()["undoBuffer"]=n._valueGet()}).bind("mouseleave.inputmask",function(){var t=e(this),n=this;if(r.clearMaskOnLostFocus){if(!t.hasClass("focus.inputmask")){if(n._valueGet()==l().join("")||n._valueGet()=="")n._valueSet("");else{A(n)}}}}).bind("click.inputmask",function(){var t=this;setTimeout(function(){var n=M(t),s=c();if(n.begin==n.end){var o=n.begin,u=i()["lastValidPosition"],a;R(t,n);if(H){if(r.numericInput){a=r.skipRadixDance===false&&r.radixPoint!=""&&e.inArray(r.radixPoint,s)!=-1?e.inArray(r.radixPoint,s):m()}else{a=y((u==undefined?m():u)+1)}M(t,o>a&&(h(o,s[o],true,H)!==false||!d(o))?o:a)}else{a=g(u==undefined?-1:u);M(t,o<a&&(h(o,s[o],true,H)!==false||!d(o))?o:a)}}},0)}).bind("dblclick.inputmask",function(){var e=this;if(i()["lastValidPosition"]!=undefined){setTimeout(function(){H?M(e,y(i()["lastValidPosition"]),m()):M(e,0,g(i()["lastValidPosition"]))},0)}}).bind("keydown.inputmask",W).bind("keypress.inputmask",X).bind("keyup.inputmask",V).bind(a+".inputmask dragdrop.inputmask drop.inputmask",function(){var t=this,n=e(t);setTimeout(function(){C(t,true,false);if(_(c()))n.trigger("complete");n.click()},0)}).bind("setvalue.inputmask",function(){var e=this;i()["undoBuffer"]=e._valueGet();C(e,true);if(e._valueGet()==l().join(""))e._valueSet("")}).bind("complete.inputmask",r.oncomplete).bind("incomplete.inputmask",r.onincomplete).bind("cleared.inputmask",r.oncleared);C(u,true,false);var j;try{j=document.activeElement}catch(F){}if(j===u){k.addClass("focus.inputmask");M(u,i()["p"])}else if(r.clearMaskOnLostFocus){if(c().join("")==l().join("")){u._valueSet("")}else{A(u)}}I(u);};return this}var r=e.extend(true,{},e.inputmask.defaults,n),s=navigator.userAgent.match(new RegExp("msie 10","i"))!==null,o=navigator.userAgent.match(new RegExp("iphone","i"))!==null,u=navigator.userAgent.match(new RegExp("android.*safari.*","i"))!==null,a=m("paste")&&!s?"paste":"input",f,l,c=0;if(u){var h=navigator.userAgent.match(/safari.*/i),p=parseInt((new RegExp(/[0-9]+/)).exec(h));f=p<=537}if(typeof t==="string"){switch(t){case"mask":g(r.alias,n);l=w();return this.each(function(){S(e.extend(true,{},l),0).mask(this)});case"unmaskedvalue":var d=e(this),v=this;if(d.data("_inputmask")){l=d.data("_inputmask")["masksets"];c=d.data("_inputmask")["activeMasksetIndex"];r=d.data("_inputmask")["opts"];return S(l,c).unmaskedvalue(d)}else return d.val();case"remove":return this.each(function(){var t=e(this),n=this;setTimeout(function(){if(t.data("_inputmask")){l=t.data("_inputmask")["masksets"];c=t.data("_inputmask")["activeMasksetIndex"];r=t.data("_inputmask")["opts"];n._valueSet(S(l,c).unmaskedvalue(t,true));t.removeData("_inputmask");t.unbind(".inputmask");t.removeClass("focus.inputmask");var e;if(Object.getOwnPropertyDescriptor)e=Object.getOwnPropertyDescriptor(n,"value");if(e&&e.get){if(n._valueGet){Object.defineProperty(n,"value",{get:n._valueGet,set:n._valueSet})}}else if(document.__lookupGetter__&&n.__lookupGetter__("value")){if(n._valueGet){n.__defineGetter__("value",n._valueGet);n.__defineSetter__("value",n._valueSet)}}delete n._valueGet;delete n._valueSet}},0)});break;case"getemptymask":if(this.data("_inputmask")){l=this.data("_inputmask")["masksets"];c=this.data("_inputmask")["activeMasksetIndex"];return l[c]["_buffer"].join("")}else return"";case"hasMaskedValue":return this.data("_inputmask")?!this.data("_inputmask")["opts"].autoUnmask:false;case"isComplete":l=this.data("_inputmask")["masksets"];c=this.data("_inputmask")["activeMasksetIndex"];r=this.data("_inputmask")["opts"];return S(l,c).isComplete(this[0]._valueGet().split(""));default:if(!g(t,n)){r.mask=t}l=w();return this.each(function(){S(e.extend(true,{},l),c).mask(this)});break}}else if(typeof t=="object"){r=e.extend(true,{},e.inputmask.defaults,t);g(r.alias,t);l=w();return this.each(function(){S(e.extend(true,{},l),c).mask(this)})}else if(t==undefined){return this.each(function(){var t=e(this).attr("data-inputmask");if(t&&t!=""){try{t=t.replace(new RegExp("'","g"),'"');var i=e.parseJSON("{"+t+"}");e.extend(true,i,n);r=e.extend(true,{},e.inputmask.defaults,i);g(r.alias,i);r.alias=undefined;e(this).inputmask(r)}catch(s){}}})}return this}}})(jQuery)